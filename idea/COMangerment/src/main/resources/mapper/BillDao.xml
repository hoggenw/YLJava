<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.hoggen.COMangerment.dao.BillDao">

    <insert id="insertBill" parameterType="com.hoggen.COMangerment.entity.Bill"
            useGeneratedKeys="true" keyProperty="billsId" keyColumn="bills_id">
		<selectKey keyProperty="billsId" order="AFTER" resultType="java.lang.Long">
			<!-- SELECT LAST_INSERT_ID()：得到刚insert到数据表中的记录的主键值，只适用于自增主键 -->
			SELECT LAST_INSERT_ID()
		</selectKey>
		INSERT INTO
		tb_bills(type,user_id,p_id,
		integral,
		create_time,remark)
		VALUES
		(#{type},#{userId},#{pId},
		#{integral},#{createTime},#{remark})
	</insert>

</mapper>