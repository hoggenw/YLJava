<?xml version="1.0" encoding="UTF-8"?>
<configuration scan="true" scanPeriod="60 seconds" debug = "false">
<!--    定义参数常量-->
<!-- trace<debug<info<warn<error-->
<property name="log.level" value="debug" />
<property name="log.maxHistory" value="365" />
<property name="log.filePath" value="${catalina.home}" />
<property name="log.pattern" value="%d{yyyy-MM-dd HH:mm:ss.SSS}[%thread] %-5level %logger{50} - %msg%n" />

<!--控制台设置-->
<appender name="consoleAppender"
    class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
        <pattern>${log.pattern}</pattern>
    </encoder>
</appender>

<!--Debug-->
<appender name="debugAppender"
    class="ch.qos.logback.core.rolling.RollingFileAppender">
<!--文件路径    -->
    <file>
        ${log.filePath}/logs/ai_debug.log
    </file>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
<!--    文件名称    -->
        <FileNamePattern>${log.filePath}/logs/debug/debug.%d{yyyy-MM-dd}.log.gz</FileNamePattern>
<!--     最大保存历史数量   -->
        <maxHistory>${log.maxHistory}</maxHistory>
    </rollingPolicy>
    
    <encoder>
        <pattern>${log.pattern}</pattern>
    </encoder>
    
    <filter class = "ch.qos.logback.classic.filter.LevelFilter">
        <level>DEBUG</level>
        <onMatch>ACCEPT</onMatch>
        <onMismatch>DENY</onMismatch>
        
    </filter>
    
    
</appender>


<!--INfo-->
<appender name="infoAppender"
    class="ch.qos.logback.core.rolling.RollingFileAppender">
    <!--文件路径    -->
    <file>
        ${log.filePath}/logs/ai_info.log
    </file>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
        <!--    文件名称    -->
        <FileNamePattern>${log.filePath}/logs/info/info.%d{yyyy-MM-dd}.log.gz</FileNamePattern>
        <!--     最大保存历史数量   -->
        <maxHistory>${log.maxHistory}</maxHistory>
    </rollingPolicy>
    
    <encoder>
        <pattern>${log.pattern}</pattern>
    </encoder>
    
    <filter class = "ch.qos.logback.classic.filter.LevelFilter">
        <level>INFO</level>
        <onMatch>ACCEPT</onMatch>
        <onMismatch>DENY</onMismatch>
    </filter>
</appender>


<!--ERROR-->
<appender name="errorAppender"
    class="ch.qos.logback.core.rolling.RollingFileAppender">
    <!--文件路径    -->
    <file>
        ${log.filePath}/logs/ai_error.log
    </file>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
        <!--    文件名称    -->
        <FileNamePattern>${log.filePath}/logs/error/error.%d{yyyy-MM-dd}.log.gz</FileNamePattern>
        <!--     最大保存历史数量   -->
        <maxHistory>${log.maxHistory}</maxHistory>
    </rollingPolicy>
    
    <encoder>
        <pattern>${log.pattern}</pattern>
    </encoder>
    
    <filter class = "ch.qos.logback.classic.filter.LevelFilter">
        <level>ERROR</level>
        <onMatch>ACCEPT</onMatch>
        <onMismatch>DENY</onMismatch>
    </filter>
</appender>
<!--additivity="true" 基于log.level在控制台输入 ，而不是root的输出基本-->
<logger name="com.fulang.medical_ai" level = "${log.level}" additivity="true">
    <appender-ref ref="debugAppender"/>
    <appender-ref ref="infoAppender"/>
    <appender-ref ref="errorAppender"/>
</logger>

<root level="INFO">
    <appender-ref ref="consoleAppender" />
</root>

</configuration>
